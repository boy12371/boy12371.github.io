<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>API | Kuangjia Network</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://kuangjia.org/en/api/index.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="zh-cn" href="http://kuangjia.org/api/index.html">
    
      <link rel="alternative" hreflang="en" href="http://kuangjia.org/en/api/index.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <link rel="stylesheet" href="/build/css/navy-c72d42fb07.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="kuangjia.org">
  <!-- Open Graph -->
  <meta name="description" content="This documentation provides more detailed information about the API and will be particularly helpful for people who want to modify the Kuangjia source code or write new plugins. If you are interested in m">
<meta property="og:type" content="website">
<meta property="og:title" content="API">
<meta property="og:url" content="http://kuangjia.org/en/api/index.html">
<meta property="og:site_name" content="kuangjia.org">
<meta property="og:description" content="This documentation provides more detailed information about the API and will be particularly helpful for people who want to modify the Kuangjia source code or write new plugins. If you are interested in m">
<meta property="og:updated_time" content="2017-03-31T22:19:24.770Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="API">
<meta name="twitter:description" content="This documentation provides more detailed information about the API and will be particularly helpful for people who want to modify the Kuangjia source code or write new plugins. If you are interested in m">
<meta name="twitter:site" content="kuangjia">
  <!-- Google Analytics -->
  
</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/en/" id="logo">Kuangjia</a>
    </h1>
    <nav id="main-nav">
      <a href="/en/docs/" class="main-nav-link">Docs</a><a href="/en/api/" class="main-nav-link">API</a><a href="/news/" class="main-nav-link">News</a><a href="/plugins/" class="main-nav-link">Plugins</a><a href="/themes/" class="main-nav-link">Themes</a>
      <a href="https://github.com/boy12371/boy12371.github.io" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="api/index.html">
        
          <option value="zh-cn">简体中文</option>
        
          <option value="en" selected>English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">API</h1>
                <a href="https://github.com/boy12371/kuangjia.org/edit/master/source/en/api/index.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>This documentation provides more detailed information about the API and will be particularly helpful for people who want to modify the Kuangjia source code or write new plugins. If you are interested in more basic usage of Kuangjia, please refer to the <a href="../docs">docs</a> instead.</p>
<p>Please note that this documentation is only valid for Kuangjia 3 and above.</p>
<h2 id="Initialize" class="article-heading"><a href="#Initialize" class="headerlink" title="Initialize"></a>Initialize<a class="article-anchor" href="#Initialize" aria-hidden="true"></a></h2><p>First, we have to create a Kuangjia instance. A new instance takes two arguments: the root directory of the website, <code>base_dir</code>, and an object containing the initialization options. Next, we initialize this instance by calling the <code>init</code> method on it, which will then cause Kuangjia to load its configuration and plugins.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Kuangjia = <span class="built_in">require</span>(<span class="string">'kuangjia'</span>);</div><div class="line"><span class="keyword">var</span> kuangjia = <span class="keyword">new</span> Kuangjia(process.cwd(), &#123;&#125;);</div><div class="line"></div><div class="line">kuangjia.init().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>debug</code></td>
<td>Enable debug mode. Display debug messages in the terminal and save <code>debug.log</code> in the root directory.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>safe</code></td>
<td>Enable safe mode. Don’t load any plugins.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>silent</code></td>
<td>Enable silent mode. Don’t display any messages in the terminal.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>config</code></td>
<td>Specify the path of the configuration file.</td>
<td><code>_config.yml</code></td>
</tr>
</tbody>
</table>
<h2 id="Load-Files" class="article-heading"><a href="#Load-Files" class="headerlink" title="Load Files"></a>Load Files<a class="article-anchor" href="#Load-Files" aria-hidden="true"></a></h2><p>Kuangjia provides two methods for loading files: <code>load</code> and <code>watch</code>. <code>load</code> is used for loading all files in the <code>source</code> folder as well as the theme data. <code>watch</code> does the same things <code>load</code> does, but will also start watching for file changes continuously.</p>
<p>Both methods will load the list of files and pass them to the corresponding processors. After all files have been processed, they will call upon the generators to create the routes.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">kuangjia.load().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">kuangjia.watch().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">// You can call kuangjia.unwatch() later to stop watching.</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Execute-Commands" class="article-heading"><a href="#Execute-Commands" class="headerlink" title="Execute Commands"></a>Execute Commands<a class="article-anchor" href="#Execute-Commands" aria-hidden="true"></a></h2><p>Any console command can be called explicitly using the <code>call</code> method on the Kuangjia instance. Such a call takes two arguments: the name of the console command, and an options argument. Different options are available for the different console commands.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">kuangjia.call(<span class="string">'generate'</span>, &#123;&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Exit" class="article-heading"><a href="#Exit" class="headerlink" title="Exit"></a>Exit<a class="article-anchor" href="#Exit" aria-hidden="true"></a></h2><p>You should call the <code>exit</code> method upon successful or unsuccessful completion of a console command. This allows Kuangjia to exit gracefully and finish up important things such as saving the database.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">kuangjia.call(<span class="string">'generate'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> kuangjia.exit();</div><div class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> kuangjia.exit(err);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2017-03-31T22:19:24.770Z" itemprop="dateModified">Last updated: 2017-04-01</time>
                <a href="events.html" class="article-footer-next" title="Events"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'kuangjia.org';
  var disqus_url = 'http://kuangjia.org/en/api/index.html';
  var disqus_title = "API";
  var disqus_config = function(){
    this.language = 'en';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Initialize"><span class="toc-text">Initialize</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Load-Files"><span class="toc-text">Load Files</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Execute-Commands"><span class="toc-text">Execute Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exit"><span class="toc-text">Exit</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Core</strong><a href="index.html" class="sidebar-link current">Overview</a><a href="events.html" class="sidebar-link">Events</a><a href="locals.html" class="sidebar-link">Locals</a><a href="router.html" class="sidebar-link">Router</a><a href="box.html" class="sidebar-link">Box</a><a href="rendering.html" class="sidebar-link">Rendering</a><a href="posts.html" class="sidebar-link">Posts</a><a href="scaffolds.html" class="sidebar-link">Scaffolds</a><a href="themes.html" class="sidebar-link">Themes</a><strong class="sidebar-title">Extensions</strong><a href="console.html" class="sidebar-link">Console</a><a href="deployer.html" class="sidebar-link">Deployer</a><a href="filter.html" class="sidebar-link">Filter</a><a href="generator.html" class="sidebar-link">Generator</a><a href="helper.html" class="sidebar-link">Helper</a><a href="migrator.html" class="sidebar-link">Migrator</a><a href="processor.html" class="sidebar-link">Processor</a><a href="renderer.html" class="sidebar-link">Renderer</a><a href="tag.html" class="sidebar-link">Tag</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      软件企业编号：沪CR-2017-8888 | 高新技术企业编号：GR201388880080<br>
      增值电信业务经营许可证：沪B2-20100888 | 沪ICP备10088888号<br>
      Copyright &copy; 2017 <a href="http://kuangjia.org" target="_blank">Kuangjia Network</a>
    </div>
    <div id="footer-contact">
      <ul class="telephone">
        <li>
          <p>热线电话：18621756518</p>
        </li>
      </ul>
      <ul class="weixin">
        <li>
          <img src="/images/kuangjia.png" title="匡架社区微信公众号">
          <p>匡架社区微信公众号</p>
        </li>
      </ul>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/en/docs/" class="mobile-nav-link">Docs</a><a href="/en/api/" class="mobile-nav-link">API</a><a href="/news/" class="mobile-nav-link">News</a><a href="/plugins/" class="mobile-nav-link">Plugins</a><a href="/themes/" class="mobile-nav-link">Themes</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/boy12371/boy12371.github.io" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Core</strong><a href="index.html" class="mobile-nav-link current">Overview</a><a href="events.html" class="mobile-nav-link">Events</a><a href="locals.html" class="mobile-nav-link">Locals</a><a href="router.html" class="mobile-nav-link">Router</a><a href="box.html" class="mobile-nav-link">Box</a><a href="rendering.html" class="mobile-nav-link">Rendering</a><a href="posts.html" class="mobile-nav-link">Posts</a><a href="scaffolds.html" class="mobile-nav-link">Scaffolds</a><a href="themes.html" class="mobile-nav-link">Themes</a><strong class="mobile-nav-title">Extensions</strong><a href="console.html" class="mobile-nav-link">Console</a><a href="deployer.html" class="mobile-nav-link">Deployer</a><a href="filter.html" class="mobile-nav-link">Filter</a><a href="generator.html" class="mobile-nav-link">Generator</a><a href="helper.html" class="mobile-nav-link">Helper</a><a href="migrator.html" class="mobile-nav-link">Migrator</a><a href="processor.html" class="mobile-nav-link">Processor</a><a href="renderer.html" class="mobile-nav-link">Renderer</a><a href="tag.html" class="mobile-nav-link">Tag</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="api/index.html">
      
        <option value="zh-cn">简体中文</option>
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<script src="/build/js/main-6aefd8e45a.js"></script>
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>

<!-- Algolia -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
  apiKey: 'null',
  indexName: 'kuangjia',
  inputSelector: '#search-input'
});
</script>


</body>
</html>